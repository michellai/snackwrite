
<!DOCTYPE html>
{% autoescape true %}
<html ng-app>
<head>
    <link rel="stylesheet" href="app/css/bootstrap.min.css">
    <link rel="stylesheet" href="app/css/bootstrap-responsive.min.css">
    <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="pencilcake icon" href="app/img/pencilcake_favicon.ico">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="app/js/bootstrap.min.js"></script>
    <script src="app/js/choice.js"></script>
    <script>
    function loadXMLDoc()
    {
        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

    }
    </script>
    <script type="text/javascript">
    $(document).ready(function() {
      $(window).resize(
        function(){
            $('.bubble').width($(window).width()/4.5);
            $('.bubble').height($('.bubble').width());
            $('.pushme').css('top', ($(window).height()*.5)+'px');
            $('.shadow').css('top', ($(window).height()*.52)+'px');
            $('p.choice').css('font-size',($(window).width()/17)+'px');
        }
      );

      $(window).resize();
      $('body').on('click', '.submitName', function()  {
        setName($('.author').val());
        $('.writeronebox').attr('contentEditable',true);
        $('.writeronebox').focus();
        $('.writeronebox').css('background-color', 'white');
        $('.writeronebox').css('padding', '20px');
        $('.author').css('display', 'none');
        $('.submitName').css('display', 'none');
        $('.writeronebox').addClass('text-left');
        $('.submitSnack').show();
        startTimer();
      });
    });
    </script>
    <script type="text/javascript">
    function setName(person)
    {
        var x;

        //var person = prompt("Please enter your name","Shakespeare");

        if (person!=null)
        {
            x = person;
        }
        else {
            x = "writer one"
        }
        document.getElementsByClassName("writerone")[0].innerHTML=x;
        document.getElementsByClassName("author")[0].value=x;
    }
    function startTimer() {
      var center = 100,
          backColor = "rgba(250,250,250,.4)",
          alpha = 0.9,
          backgroundCheck = false,
          canvas = document.getElementById("myCanvas"),
          ctx = canvas.getContext("2d"),
          shadow = {
            color:"rgba(35,242,250,1)",
            offsetX:0,
            offsetY:0,
            blur:1
          },
          secSetup = {
            radie:66,
            lineWidth:65,
            back:66,
            color:"rgba(250,250,250," + alpha + ")",
            counter:0,
            old:0
          },
          check = function(count, setup, ctx) {
            if (count < setup.old){
              setup.counter++
            }
            if(setup.counter % 2 === 0){
              draw(setup.radie, setup.color, setup.lineWidth, 0, count, ctx);
            } else{
              draw(setup.radie, setup.color, setup.lineWidth, count, 0, ctx);
            }
          },
          draw = function(radie, color, lineWidth, firstCount, secondCount, ctx) {
            ctx.beginPath();
            ctx.arc(center, center, radie, firstCount * Math.PI, secondCount * Math.PI, false);
            ctx.lineWidth = lineWidth;
            ctx.shadowColor = shadow.color;
            ctx.shadowOffsetX = shadow.offsetX;
            ctx.shadowOffsetY = shadow.offsetY;
            ctx.shadowBlur = shadow.blur;
            ctx.strokeStyle = color;
            ctx.stroke();
          },
          background = function() {
            draw(secSetup.radie, backColor, secSetup.back, 0, 2, ctx);
            draw(secSetup.radie, backColor, secSetup.lineWidth, 0, 2, ctx);
          };

      $("body").click(function() {
        backgroundCheck = !backgroundCheck;
      });

      setInterval(function(){
        canvas.width = canvas.width;
        background();
        var d = new Date(),
            milliSeconds = d.getMilliseconds(),
            seconds = (d.getSeconds() + ((d.getMilliseconds() / 1000))),
            minutes = (d.getMinutes() + (seconds / 60)),
            hours = (d.getHours() + (minutes / 60)) % 12,
            hourCount = (2 / 12) * hours,
            minCount = (2 / 60) * minutes,
            secCount = (2 / 60) * seconds,
            milliCount = (2 / 1000) * milliSeconds;
        check(secCount, secSetup, ctx);

        secSetup.old = secCount - 0.01;
      }, 0);
      
    }

    </script>
</head>
<body >
      <div class="container-fluid">
        <div id="header" class="row" >
            <div class="col-md-10 col-lg-8 col-md-offset-1 col-lg-offset-2 hidden-xs hidden-sm">
                <div class="row" >
                  <div class="col-xs-12 col-sm-12 col-md-12 logoline">
                    <p class="tagline" id="tagleft">fictitious</p>
                    <a class="homelink" href="/">
                        <img id="logo" class="img-responsive" src="app/img/pencilcake.png"/>
                    </a>
                    <p class="tagline" id="tagright">nibbling</p>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12 text-center">
                    <p><span id="contestwordheader" title="Word">{{contest_word}}
                       <span id="definition">{{definition}}</span>
                    </span></p>
                  </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 visible-xs visible-sm">
                <div class="row logoline" >
                  <img id="tinylogo" class="img-responsive" src="app/img/pencilcake_s.png"/>
                  <p><span class="contestwordheader" title="Word">{{contest_word}}
                      <span id="definition">{{definition}}</span>
                  </span></p>
                </div>
            </div>
        </div>
        <form id="snacktext" name="snackform" method="post" action="/write">
            <div id="write" class="row">
              <div class="col-sm-5 col-sm-offset-1 hidden-xs text-center center-block">
                  <div class="writerone writers label">writer one</div>
                  <div class="center-block writeronebox inputbox" tabindex="-1">
                    <input type="text" class="author textfield text-center" name="author" placeholder="your name" />
                    <div class="submitName text-center btn-info">Start!</div>

                  </div>
              </div>
              <div class="col-xs-12 visible-xs text-center">
                  <textarea form="snacktext" class="xsinputbox" autofocus rows=9 cols=30></textarea>
              </div>
              <div class="col-sm-5 hidden-xs text-center center-block">
                  <div class="writertwo writers label">writer two</div>
                  <div class="writertwobox center-block inputbox text-center" contenteditable="false">
                          <div id="shine" class="center-block">
                             <canvas width="200" height="200" id="myCanvas" class="center-block"></canvas>
                          </div>

                          <input type="hidden" name="contest_word" value="{{contest_word}}">
                          <input class="submitSnack btn-info" type="submit" value="done!">
                  </div>
              </div>
            </div>
        </form>
      </div>
  </body>
</html>
{% endautoescape %}
